## 네트워크 보안 #2주차

***

<br> 

### **프로토콜 3 요소**

- 구문
  - 데이터 구조나 포맷
- 의미
  - 전송 데이터 각 부분이 어떤 의미를 가지는지 미리 정해둔 규칙
  - 오류 제어, 동기 제어, 흐름 제어 등 포함
- 순서
  - 데이터 전송 순서와 전송 속도 정의



### **프로토콜 기능**

- 주소 설정
  - 서로 다른 시스템의 두 개체가 통신 하는 경우
- 순서 제어
  - 프로토콜 데이터 단위 전송시 보내는 순서 명시 기능
- 데이터 대열의 단편화 및 재조합
  - 대용량 파일 전송시 효율이 높은 작은 단위로 나누어 전송
  - 전송 받는 시스템에서 이를 재조합
- 캡슐화
  - 데이터에 제어 정보를 덧붙임
- 연결 제어
  - 연결 설정, 데이터 전송, 연결 해제에 대한 통제 수행
- 흐름 제어
  - 송신측 개체로부터 오는 데이터 양, 속도 조절 기능
  - 송수신측 속도 차이로 인한 정보 유실 방지
- 오류 제어
  - 데이터 교환시 순서 검사나 타임아웃시 재전송 요구
- 동기화
  - 데이터 송수신시 타이머 값 또는 윈도우 크기를 동시에 정의된 인자 값을 공유
- 다중화
  - 통신 선로 하나에서 여러 시스템을 동시에 통신
- 전송 서비스
  - 우선순위 결정
  - 서비스 등급과 보안 요구 등을 제어하는 서비스



### **ISO 7계층**

> **응용(7)-표현(6)-세션(5)-전송(4)-네트워크(3)-데이터 링크(2)-물리(1)**

- 물리 계층
  - 실제 장치 연결에 필요한 전기적, 물리적 세부 사항
  - 케이블 : UTP, FTP, STP
  - ex) 허브, 리피터
- 데이터 링크 계층
  - 점대점 사이 신뢰성 있는 전송 보장
  - CRC 기반 오류제어, 흐름제어 필요
  - ex) 이더넷, TDMA, 스위치
- 네트워크 계층
  - 여러 노드 거칠때 마다 경로 찾아주는 역할
  - 라우팅, 흐름 제어, 단편화 및 재결합, 오류 제어 등 수행
  - ex) 라우터, 이 계층에서 동작하는 스위치는 L3 스위치, IP
- 전송 계층
  - 양 끝단 사용자들이 신뢰성 있는 데이터를 송수신하게 한다.
  - ex) TCP, UDP
- 세션 계층
  - 양 끝단 응용 프로세스가 통신을 관리하기 위한 방법 제공
  - 동시 송수신, 반이중 방식, 전이중 방식 통신
  - TCP/IP 세션을 생성, 소멸 책임을 진다.
- 표현 계층
  - 시스템에서 사용되는 코드 간의 번역 담당
  - 데이터 압축, 암호화 기능 수행
- 응용 계층
  - 사용자나 응용프로그램 사이 데이터 교환 가능하게 해준다.
  - ex) http, ftp, 터미널 서비스 등



### **TCP/IP 4 계층**

> **응용-전송-인터넷-네트워크 인터페이스**



### **데이터 링크 계층 - 스위치**

- 데이터 링크 계층에서 작동하는 스위치를 의미
- **스위칭 방식**
  - [1] 패킷 전송 방식에 따른 구분
    - 컷 스루 방식
      - 목적지 주소 포트로 프레임 즉시 전송, 지연 시간 최소화
      - 수신 패킷 오류 발생시 목적지 장치에서 해당 패킷 폐기
    - 저장 후 전송 방식
      - 전체 프레임 수신, 버퍼에 보관, CRC 오류 확인, 정상 프레임 목적지 포트로 전송
      - 패킷 길이에 비례해 전송 지연 발생
      - 컷스루 방식과 동시에 지원하는 것이 일반적
    - 인텔리전트 스위칭 방식
      - 컷스루 모드로 작동하다가 오류 발생시 저장 후 전송 모드로 자동 전환
      - 오류율 0이 되면 자동으로 다시 컷스루 방식으로 전환
  - [2] 제공 경로의 대역폭에 따른 구분
    - 반이중 방식
      - 양방향 통신 기능 제공, 한 번에 하나의 동작만 가능(수신 또는 송신)
    - 전이중 방식
      - 송수신 포트를 분리해 전송 거리 제한 연장 가능
      - 스위치에서만 전이중 방식 지원 가능
- **스위치 테이블**
  - 시스템 간의 원활한 통신을 위해 주소 테이블 생성, 관리하는 역할



### **네트워크 계층 - ARP 프로토콜**

- 목적지 IP 주소와 MAC 주소를 알아내는 프로토콜
- 브로드 캐스트를 통해 특정 IP 주소를 사용하는 호스트가 응답하도록 요구
- RARP
  - 디스크 없는 호스트가 자신의 IP 주소를 서버로부터 확인하는 프로토콜
  - 워크스테이션 또는 지능형 단말기에서 사용

> **arp -a 명령어 : 통신 중 서버측의 ARP 테이블 출력**



### **네트워크 계층 - IP 프로토콜**

- 32자리, 8자리마다 점을 찍어 구분
- A, B, C, D, E 클래스로 구분, 각 클래스는 네트워크와 호스트로 구성
  - A : 0으로 시작(0 ~ 127)
  - B : 10으로 시작(128 ~ 191)
  - C : 110으로 시작(192 ~ 223)
  - D : 1110 으로 시작(224 ~ 239)
  - E : 1111로 시작(240 ~ 255)



### **네트워크 계층 - ICMP(Internet Control Message Protocol)**

- 호스트 서버와 인터넷 게이트웨이 사이에서 메시지 제어, 오류를 알려주는 프로토콜
- ex) ping, traceroute, tracert
- **ICMP 메시지**
  - Echo Request
    - 송신측의 전송 패킷이 노드나 라우터에 도착하는지를 확인하는데 사용
  - Destination Unreachable
    - 라우터가 특정 노드의 패킷을 목적지에 보내지 못했을 때 보내는 메시지
    - 이유 나타내줌
  - Redirect
    - 라우터가 송신측 노드에 적합하지 않은 경로로 설정되어있는 경우 경로 재지정 메시지
  - Time Exceeded
    - 패킷이 네트워크 사이에서 무한히 돌아가지 않도록 처리할 때마다 TTL 감소
    - 0이 되면 보내는 메시지
  - Source Quench
    - IP 라우터의 WAN 쪽에 집중이 발생, 송신 불능 상태시 보내는 메시지

### **네트워크 계층 - IGMP(Internet Group Management Protocol)**

- 멀티 캐스트에 관여하는 프로토콜
- 멀티캐스트 그룹 관리 역할
- 유니 캐스트(1:1)
  - 한 호스트에서 다른 호스트로의 전송
  - 일반적인 IP 데이터의 전송에서 사용
- 브로드 캐스트(1:N)
  - 호스트에서 IP 네트워크에 있는 전체 호스트로 데이터 전송
- 멀티 캐스트(N:M)
  - 송신하는 하나의 호스트에 특정 호스트를 묶어서 전송
  - IP 멀티 캐스트 주소는 D 클래스로 규정



### **네트워크 계층 - 라우터**

- 논리적으로 분리된 둘 이상의 네트워크를 연결
- 로컬 네트워크에서 브로드 캐스트를 차단하여 네트워크 분리
- 패킷 최적 경로를 찾기 위한 라우팅 테이블 구성
- 게이트웨이라고도 함

> **route PRINT 명령어 : 현재 PC의 라우팅 테이블 출력**

> **tracert 명령어** : 지정한 목적지 경로로 ICMP 패킷을 전송(경로 확인)<br> ex) tracert 200.200.200.200 <br> 200.200.200.200으로 시작하는 경로로 ICMP 패킷을 전송(경로 출력)

- **라우팅**
  - 정적 라우팅
    - 관리자 권한으로 특정 경로를 통해서만 패킷이 지날 수 있도록 설정
    - 네트워크 변경사항 발생시 수동으로 라우팅 테이블 수정해야 함
    - 라우팅 알고리즘을 사용하지 않아 처리 부하 감소
    - 백업 구성이 곤란함
    - 백업 회선 존재시 빠른 복구 가능, 기타 장애시 복구 시간 소요
    - 단일 경로에 적합
  - 동적 라우팅
    - 라우터가 네트워크 연결 상태를 스스로 파악, 최적 경로 선택 후 전송
    - 네트워크 연결 형태가 변경되어도 자동으로 문제 해결
    - 라우팅 알고리즘 사용, 관리 용이
    - 주기적 라우팅 정보 송수신 -> 대역폭 낭비 초래
    - 백업 구성이 쉬움
    - 백업 회선 존재시 빠른 복구 가능
    - 다중 경로에 적합

### **응용 계층 - FTP 프로토콜**

- FTP 프로토콜
  - 파일 전송 프로토콜
  - 클라이언트와 서버가 대화형으로 통신
- Telnet 
  - 사용자가 원격에 있는 서버에 로그인하도록 TCP 연결 설정
  - 단말기가 원격 컴퓨터를 직접 조작할 수 있게 해준다.
- SMTP
  - 메일 서비스 프로토콜
- DNS
  - 도메인 이름 주소를 통해 IP 주소를 확인할 수 있는 프로토콜
- TFTP
  - 파일 전송 프로토콜
  - UDP 패킷 사용, 인증 기능 제공하지 않음
- HTTP
  - 인터넷을 위해 사용하는 기본적인 프로토콜
- PoP3 & IMAP
  - POP3 : 메일 서버로 전송된 메일을 확인할 때 사용하는 프로토콜
    - 메일 읽은 후 메일이 서버에서 삭제됨
  - IMAP : 메일 서버로 전송된 메일을 확인할 때 사용하는 프로토콜
    - 메일 읽은 후 메일이 서버에 남음
- RPC
  - Remote Procedure Call
- NetBIOS
  - 기본적 사무기기와 윈도우 시스템 간의 파일 공유
  - NBT 프로토콜 사용 : 원격 인터넷으로 전달 가능
- SNMP
  - 네트워크 관리와 모니터링을 위한 프로토콜